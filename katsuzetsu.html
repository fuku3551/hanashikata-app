<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>æ»‘èˆŒç·´ç¿’ï¼ˆãƒ•ãƒ¬ãƒ¼ã‚ºå¼ï¼‰</title>
<link rel="stylesheet" href="style.css">

<style>
#phraseBody{
  font-size:32px;
  font-weight:800;
  text-align:center;
  line-height:1.9;
}

.karaChar{
  display:inline-block;
  padding:2px 3px;
  border-radius:6px;
}

.karaChar.active{
  background:#ffdddd;
  color:#d60000;
}

.karaChar.done{
  opacity:0.5;
}

.row{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
}

input[type=range]{
  width:220px;
}

.modeOn{
  border:2px solid #333;
}

.mini{
  font-size:14px;
  opacity:0.8;
  line-height:1.7;
  white-space:pre-wrap;
}
</style>
</head>

<body>

<header class="top">
<h1>ğŸ‘„ æ»‘èˆŒç·´ç¿’</h1>
<p class="sub">ã‚«ãƒ©ã‚ªã‚±å¼ã§ç·´ç¿’ã§ãã¾ã™</p>
<p><a href="index.html">â† ãƒ›ãƒ¼ãƒ ã¸</a></p>
</header>

<main class="menu">

<!-- ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ -->
<div class="card">
  <div class="title">ğŸ”° ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼ˆç´„2ã€œ3åˆ†ï¼‰</div>
  <div class="desc">
    <div id="dailyText" class="mini">èª­ã¿è¾¼ã¿ä¸­â€¦</div>

    <div class="row" style="margin-top:10px;">
      <button onclick="startDaily()">â–¶ é–‹å§‹</button>
      <button onclick="shuffleDaily()">ğŸ² å¤‰æ›´</button>
    </div>

    <div class="mini" style="margin-top:8px;">
      ğŸ’¡ è¿·ã£ãŸã‚‰ã“ã‚Œã ã‘ã§OKï¼ˆçŸ­æ™‚é–“ã§ç¶šãè¨­è¨ˆï¼‰
    </div>
  </div>
</div>

<!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div class="card">
  <div class="title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div>
  <div class="desc row">
    <button onclick="setSection(0)">â‘ æ¯éŸ³</button>
    <button onclick="setSection(1)">â‘¡åŸºæœ¬</button>
    <button onclick="setSection(2)">â‘¢æ¿éŸ³</button>
    <button onclick="setSection(3)">â‘£æ‹—éŸ³</button>
    <button onclick="setSection(4)">â‘¤ãƒªã‚ºãƒ </button>
    <button onclick="setSection(5)">â‘¥é›£èª</button>
  </div>
</div>

<!-- æ“ä½œ -->
<div class="card">
  <div class="title">æ“ä½œ</div>
  <div class="desc">

    <div class="row">
      <button onclick="togglePlay()">ğŸ”Šå†ç”Ÿ</button>
      <button id="autoBtn" onclick="toggleAuto()">è‡ªå‹•OFF</button>
      <button id="karaBtn" onclick="toggleKara()">ğŸŒˆON</button>
    </div>

    <div class="row" style="margin-top:8px;">
      é€Ÿåº¦
      <input id="speedRange" type="range" min="200" max="900" value="450" oninput="setSpeed(this.value)">
      <span id="speedLabel">450ms</span>
    </div>

    <div class="row" style="margin-top:8px;">
      <button id="bBtn" class="modeOn" onclick="setLevel('b')">åˆå¿ƒè€…</button>
      <button id="aBtn" onclick="setLevel('a')">ä¸Šç´š</button>
    </div>

    <div class="mini" style="margin-top:8px;">
      ãƒ»åˆå¿ƒè€…ï¼šã‚†ã£ãã‚Šï¼†æ­£ç¢ºï¼ˆãŠã™ã™ã‚ï¼‰<br>
      ãƒ»ä¸Šç´šï¼šãƒ†ãƒ³ãƒUPï¼ˆè‡ªå‹•ONæ¨å¥¨ï¼‰
    </div>

  </div>
</div>

<!-- è¡¨ç¤º -->
<div class="card">
  <div class="title" id="sectionTitle"></div>
  <div class="desc">

    <div style="text-align:center;">
      <span id="counter"></span>
    </div>

    <div style="border:1px solid #ccc;border-radius:12px;padding:12px;">
      <div id="phraseBody"></div>
    </div>

    <div class="row" style="margin-top:10px;">
      <button onclick="prev()">â—€</button>
      <button onclick="next()">â–¶</button>
      <button onclick="rand()">ğŸ²</button>
      <button onclick="reset()">âŸ²</button>
    </div>

    <div class="mini" style="text-align:center; margin-top:10px;">
      â€» ã¾ãšã€Œã‚†ã£ãã‚Šæ­£ç¢ºã«ã€â†’ æ…£ã‚ŒãŸã‚‰å°‘ã—ãƒ†ãƒ³ãƒã‚¢ãƒƒãƒ—
    </div>

  </div>
</div>

</main>

<script>
/* =========================
   ãƒ‡ãƒ¼ã‚¿ï¼ˆå¢—é‡ãƒ•ãƒ«ç‰ˆï¼‰
========================= */

// â‘  æ¯éŸ³ï¼ˆå¢—é‡ï¼‰
const p1 = [
  "ã‚ã„ã†ãˆãŠ",
  "ã‚ãˆã„ã†ãˆãŠã€€ã‚ãŠ",
  "ã‚ã„ã†ãˆãŠã€€ã‚ãŠ",
  "ã‚ãŠã€€ã‚ãˆã„ã€€ã†ãˆãŠ",
  "ã‚ã„ã†ãˆãŠã€€ã‚ã„ã†ãˆãŠ",
  "ã‚ãƒ¼ã„ãƒ¼ã†ãƒ¼ãˆãƒ¼ãŠãƒ¼ï¼ˆã‚†ã£ãã‚Šï¼‰",
  "ã‚ã€€ã„ã€€ã†ã€€ãˆã€€ãŠï¼ˆ1éŸ³ãšã¤ï¼‰",
  "ã‚ã„ã€€ã†ãˆã€€ãŠã‚ã€€ãˆã†",
  "ã‚ã„ã†ã€€ãˆãŠã‚ã€€ã„ã†ãˆãŠ",
  "ã‚ãˆã„ã€€ã†ãˆãŠã€€ã‚ãŠ",
  "ã‚ãŠã‚ãŠã€€ã‚ãˆã„ãˆã€€ã†ãˆãŠã†",
  "ã‚ã„ã†ãˆãŠã€€ãŠãˆã†ã„ã‚"
];

// â‘¡ è¡Œåˆ¥åŸºæœ¬ï¼ˆãƒ•ãƒ«ï¼‰
const p2 = [
  "ï¼ˆã‚è¡Œï¼‰ ã‚ã€€ã„ã€€ã†ã€€ãˆã€€ãŠ",
  "ã‚ãˆã„ã€€ã†ãˆãŠã€€ã‚ãŠ",
  "ï¼ˆã‹è¡Œï¼‰ ã‹ã€€ãã€€ãã€€ã‘ã€€ã“",
  "ã‹ããã‘ã“ã€€ã‹ã‘ã“ã€€ããã‘",
  "ï¼ˆã•è¡Œï¼‰ ã•ã€€ã—ã€€ã™ã€€ã›ã€€ã",
  "ã•ã—ã™ã›ãã€€ã•ã›ãã€€ã—ã™ã›",
  "ï¼ˆãŸè¡Œï¼‰ ãŸã€€ã¡ã€€ã¤ã€€ã¦ã€€ã¨",
  "ãŸã¡ã¤ã¦ã¨ã€€ãŸã¦ã¨ã€€ã¡ã¤ã¦",
  "ï¼ˆãªè¡Œï¼‰ ãªã€€ã«ã€€ã¬ã€€ã­ã€€ã®",
  "ãªã«ã¬ã­ã®ã€€ãªã­ã®ã€€ã«ã¬ã­",
  "ï¼ˆã¯è¡Œï¼‰ ã¯ã€€ã²ã€€ãµã€€ã¸ã€€ã»",
  "ã¯ã²ãµã¸ã»ã€€ã¯ã¸ã»ã€€ã²ãµã¸",
  "ï¼ˆã¾è¡Œï¼‰ ã¾ã€€ã¿ã€€ã‚€ã€€ã‚ã€€ã‚‚",
  "ã¾ã¿ã‚€ã‚ã‚‚ã€€ã¾ã‚ã‚‚ã€€ã¿ã‚€ã‚",
  "ï¼ˆã‚„è¡Œï¼‰ ã‚„ã€€ã‚†ã€€ã‚ˆ",
  "ã‚„ã‚†ã‚ˆã€€ã‚†ã‚ˆã‚„ã€€ã‚ˆã‚„ã‚†",
  "ï¼ˆã‚‰è¡Œï¼‰ ã‚‰ã€€ã‚Šã€€ã‚‹ã€€ã‚Œã€€ã‚",
  "ã‚‰ã‚Šã‚‹ã‚Œã‚ã€€ã‚‰ã‚Œã‚ã€€ã‚Šã‚‹ã‚Œ",
  "ï¼ˆã‚è¡Œï¼‰ ã‚ã€€ã‚’ã€€ã‚“",
  "ã‚ã‚’ã‚“ã€€ã‚ã‚“ã‚’ã€€ã‚’ã‚ã‚“"
];

// â‘¢ æ¿éŸ³ãƒ»åŠæ¿éŸ³ï¼ˆãƒ•ãƒ«ï¼‰
const p3 = [
  "ãŒããã’ã”ã€€ãŒã’ã”ã€€ããã’",
  "ã–ã˜ãšãœãã€€ã–ãœãã€€ã˜ãšãœ",
  "ã ã¢ã¥ã§ã©ã€€ã ã§ã©ã€€ã¢ã¥ã§",
  "ã°ã³ã¶ã¹ã¼ã€€ã°ã¹ã¼ã€€ã³ã¶ã¹",
  "ã±ã´ã·ãºã½ã€€ã±ãºã½ã€€ã´ã·ãº"
];

// â‘£ æ‹—éŸ³ï¼ˆãƒ•ãƒ«ï¼‰
const p4 = [
  "ãã‚ƒãã‚…ãã‚‡ã€€ãã‚ƒããã‚‡ã€€ãã‚…ãã‚‡ãã‚ƒ",
  "ã—ã‚ƒã—ã‚…ã—ã‚‡ã€€ã—ã‚ƒãã—ã‚‡ã€€ã—ã‚…ã—ã‚‡ã—ã‚ƒ",
  "ã¡ã‚ƒã¡ã‚…ã¡ã‚‡ã€€ã¡ã‚ƒãã¡ã‚‡ã€€ã¡ã‚…ã¡ã‚‡ã¡ã‚ƒ",
  "ã«ã‚ƒã«ã‚…ã«ã‚‡ã€€ã«ã‚ƒãã«ã‚‡ã€€ã«ã‚…ã«ã‚‡ã«ã‚ƒ",
  "ã²ã‚ƒã²ã‚…ã²ã‚‡ã€€ã²ã‚ƒãã²ã‚‡ã€€ã²ã‚…ã²ã‚‡ã²ã‚ƒ",
  "ã¿ã‚ƒã¿ã‚…ã¿ã‚‡ã€€ã¿ã‚ƒãã¿ã‚‡ã€€ã¿ã‚…ã¿ã‚‡ã¿ã‚ƒ",
  "ã‚Šã‚ƒã‚Šã‚…ã‚Šã‚‡ã€€ã‚Šã‚ƒãã‚Šã‚‡ã€€ã‚Šã‚…ã‚Šã‚‡ã‚Šã‚ƒ"
];

// â‘¤ ãƒªã‚ºãƒ ï¼ˆãƒ•ãƒ«ï¼‰
const p5 = [
  "ãŸãŸãŸã€€ã¦ã¦ã¦ã€€ã¨ã¨ã¨",
  "ã‹ã‹ã‹ã€€ãããã€€ããã",
  "ã•ã•ã•ã€€ã—ã—ã—ã€€ã™ã™ã™",
  "ã‚‰ã‚‰ã‚‰ã€€ã‚Šã‚Šã‚Šã€€ã‚‹ã‚‹ã‚‹"
];

// â‘¥ è¨€ã„ã«ãã„è¨€è‘‰ï¼ˆãƒ•ãƒ«ï¼‰
const p6 = [
  "ã‚ã‚ã‚“ã¼ã‚ã‹ã„ãªã€€ã‚ã„ã†ãˆãŠã€€ã†ãã‚‚ã«ã“ãˆã³ã‚‚ãŠã‚ˆã„ã§ã‚‹",
  "ç”Ÿéº¦ï¼ˆãªã¾ã‚€ãï¼‰ã€€ç”Ÿç±³ï¼ˆãªã¾ã”ã‚ï¼‰ã€€ç”Ÿåµï¼ˆãªã¾ãŸã¾ã”ï¼‰",
  "èµ¤å·»ç´™ï¼ˆã‚ã‹ã¾ããŒã¿ï¼‰ã€€é’å·»ç´™ï¼ˆã‚ãŠã¾ããŒã¿ï¼‰ã€€é»„å·»ç´™ï¼ˆãã¾ããŒã¿ï¼‰",
  "æ±äº¬ç‰¹è¨±è¨±å¯å±€ï¼ˆã¨ã†ãã‚‡ã†ã¨ã£ãã‚‡ãã‚‡ã‹ãã‚‡ãï¼‰",
  "éš£ï¼ˆã¨ãªã‚Šï¼‰ã®å®¢ï¼ˆãã‚ƒãï¼‰ã¯ã‚ˆãæŸ¿ï¼ˆã‹ãï¼‰é£Ÿã†å®¢ã ",
  "ã“ã®ç«¹å£ï¼ˆãŸã‘ãŒãï¼‰ã«ç«¹ç«‹ï¼ˆãŸã‘ãŸï¼‰ã¦ã‹ã‘ãŸã®ã¯ç«¹ç«‹ï¼ˆãŸã‘ãŸï¼‰ã¦ã‹ã‘ãŸã‹ã£ãŸã‹ã‚‰",
  "è€è‹¥ç”·å¥³ï¼ˆã‚ã†ã«ã‚ƒããªã‚“ã«ã‚‡ï¼‰",
  "æ—…å®¢æ©Ÿï¼ˆã‚Šã‚‡ã‹ã£ãï¼‰ã€€æ—…å®¢èˆ¹ï¼ˆã‚Šã‚‡ã‹ãã›ã‚“ï¼‰ã€€æ—…é¤¨ï¼ˆã‚Šã‚‡ã‹ã‚“ï¼‰",
  "æ¥­å‹™ä¸Šéå¤±è‡´æ­»å‚·ï¼ˆãã‚‡ã†ã‚€ã˜ã‚‡ã†ã‹ã—ã¤ã¡ã—ã—ã‚‡ã†ï¼‰",
  "æ‰“è€…èµ°è€…å‹è€…ï¼ˆã ã—ã‚ƒãã†ã—ã‚ƒã—ã‚‡ã†ã—ã‚ƒï¼‰",
  "é­”è¡“å¸«æ‰‹è¡“ä¸­ï¼ˆã¾ã˜ã‚…ã¤ã—ã—ã‚…ã˜ã‚…ã¤ã¡ã‚…ã†ï¼‰",
  "è²§ä¹äººï¼ˆã³ã‚“ã¼ã†ã«ã‚“ï¼‰ã€€æ•è…•å¼è­·å£«ï¼ˆã³ã‚“ã‚ã‚“ã¹ã‚“ã”ã—ï¼‰",
  "ãƒã‚¹ã‚¬ã‚¹çˆ†ç™ºï¼ˆã°ã™ãŒã™ã°ãã¯ã¤ï¼‰",
  "è²¨å®¢èˆ¹ï¼ˆã‹ãã‚ƒãã›ã‚“ï¼‰ã€€æ—…å®¢èˆ¹ï¼ˆã‚Šã‚‡ã‹ãã›ã‚“ï¼‰ã€€å®¢èˆ¹ï¼ˆãã‚ƒãã›ã‚“ï¼‰",
  "ç©¶æ¥µï¼ˆãã‚…ã†ãã‚‡ãï¼‰ã€€ä¾›çµ¦ï¼ˆãã‚‡ã†ãã‚…ã†ï¼‰ã€€è¦æ±‚ï¼ˆã‚ˆã†ãã‚…ã†ï¼‰",
  "ãã‚ƒã‚Šãƒ¼ãã‚…ã‚Šãƒ¼ãã‚‡ã‚ãã‚‡ã‚ï¼ˆâ€»æ‹—éŸ³ç·´ç¿’ï¼‰",
  "ã—ã‚ƒã—ã‚…ã—ã‚‡ã§ã€€ã—ã‚…ã—ã‚…ã—ã‚…ã£ã¨ã€€ã—ã‚‡ã—ã‚‡ã—ã‚‡",
  "ã¡ã‚ƒã¡ã‚…ã¡ã‚‡ã§ã€€ã¡ã‚‡ã¡ã‚‡ã¡ã‚‡ã£ã¨ã€€ã¡ã‚…ã¡ã‚…ã¡ã‚…ã£ã¨",
  "æ–°è¨­ï¼ˆã—ã‚“ã›ã¤ï¼‰æ–½è¨­ï¼ˆã—ã›ã¤ï¼‰è¦–å¯Ÿï¼ˆã—ã•ã¤ï¼‰",
  "æ—©æœï¼ˆãã†ã¡ã‚‡ã†ï¼‰æ—©é€€ï¼ˆãã†ãŸã„ï¼‰ç›¸å¯¾ï¼ˆãã†ãŸã„ï¼‰",
  "åˆå‡ºå ´ï¼ˆã—ã‚‡ã—ã‚…ã¤ã˜ã‚‡ã†ï¼‰ã€€å‡ºå ´è€…ï¼ˆã—ã‚…ã¤ã˜ã‚‡ã†ã—ã‚ƒï¼‰ã€€ä¸»å¼µï¼ˆã—ã‚…ã¡ã‚‡ã†ï¼‰",
  "è‚©å©ãæ©Ÿï¼ˆã‹ãŸãŸãŸããï¼‰ã€€ãŸã å©ãæ©Ÿï¼ˆãŸã ãŸãŸããï¼‰",
  "å–æ¨é¸æŠï¼ˆã—ã‚…ã—ã‚ƒã›ã‚“ãŸãï¼‰ã€€è©¦å†™å®¤ï¼ˆã—ã—ã‚ƒã—ã¤ï¼‰ã€€æ”¯ç¤¾è¦–å¯Ÿï¼ˆã—ã—ã‚ƒã—ã•ã¤ï¼‰",
  "å·¦æŠ˜è»Šï¼ˆã•ã›ã¤ã—ã‚ƒï¼‰ã€€å³æŠ˜è»Šï¼ˆã†ã›ã¤ã—ã‚ƒï¼‰ã€€å¾è¡Œè»Šï¼ˆã˜ã‚‡ã“ã†ã—ã‚ƒï¼‰",
  "æœ€çµ‚æ‰‹æ®µï¼ˆã•ã„ã—ã‚…ã†ã—ã‚…ã ã‚“ï¼‰ã€€åé›†ï¼ˆã—ã‚…ã†ã—ã‚…ã†ï¼‰ã€€é›†ä¸­ï¼ˆã—ã‚…ã†ã¡ã‚…ã†ï¼‰",
  "ç‰¹æ€¥åˆ—è»Šï¼ˆã¨ã£ãã‚…ã†ã‚Œã£ã—ã‚ƒï¼‰ã€€æ™®é€šåˆ—è»Šï¼ˆãµã¤ã†ã‚Œã£ã—ã‚ƒï¼‰",
  "å†å†å†ï¼ˆã•ã„ã•ã„ã•ã„ï¼‰ç¢ºèªï¼ˆã‹ãã«ã‚“ï¼‰ã€€æœ€çµ‚ï¼ˆã•ã„ã—ã‚…ã†ï¼‰ç¢ºèªï¼ˆã‹ãã«ã‚“ï¼‰"
];

const sections = [
  {t:"â‘ æ¯éŸ³", d:p1},
  {t:"â‘¡åŸºæœ¬", d:p2},
  {t:"â‘¢æ¿éŸ³", d:p3},
  {t:"â‘£æ‹—éŸ³", d:p4},
  {t:"â‘¤ãƒªã‚ºãƒ ", d:p5},
  {t:"â‘¥é›£èª", d:p6},
];

let sec = 0;
let idx = 0;

/* ===== è¨­å®š ===== */
let auto = false;
let kara = true;
let speed = 450;
let level = "b";
let timer = null;

/* =========================
   æ‹—éŸ³å‡¦ç†ï¼ˆ2æ–‡å­—ã‚»ãƒƒãƒˆå¯¾å¿œï¼‰
   ä¾‹ï¼šã¡ + ã‚ƒ ã‚’ã€Œã¡ã‚ƒã€ã¨ã—ã¦1ãƒ¦ãƒ‹ãƒƒãƒˆæ‰±ã„
========================= */
function splitText(txt){
  const small = "ã‚ƒã‚…ã‚‡ããƒã…ã‡ã‰";
  let arr = [];
  let buf = "";

  for(let c of txt){
    if(small.includes(c)){
      buf += c;          // ç›´å‰ã®æ–‡å­—ã«å°æ–‡å­—ã‚’é€£çµ
    }else{
      if(buf) arr.push(buf);
      buf = c;
    }
  }
  if(buf) arr.push(buf);
  return arr;
}

/* ===== è¡¨ç¤º ===== */
function render(){
  const s = sections[sec];
  sectionTitle.textContent = s.t;
  counter.textContent = (idx+1) + "/" + s.d.length;

  const text = s.d[idx];

  if(kara){
    renderKara(text);
  }else{
    phraseBody.textContent = text;
  }
}

function renderKara(text){
  phraseBody.innerHTML = "";
  const units = splitText(text);

  units.forEach(u=>{
    const sp = document.createElement("span");
    sp.className = "karaChar";
    sp.textContent = u;
    phraseBody.appendChild(sp);
  });
}

/* ===== ã‚«ãƒ©ã‚ªã‚± ===== */
function stopKara(){
  if(timer){
    clearInterval(timer);
    timer = null;
  }
  document.querySelectorAll(".karaChar").forEach(s=>{
    s.classList.remove("active","done");
  });
}

function startKara(){
  if(!kara) return;

  stopKara();

  const spans = document.querySelectorAll(".karaChar");
  let i = 0;

  timer = setInterval(()=>{
    if(i>0){
      spans[i-1].classList.remove("active");
      spans[i-1].classList.add("done");
    }

    if(i >= spans.length){
      clearInterval(timer);
      timer = null;
      if(auto) setTimeout(next, 600);
      return;
    }

    spans[i].classList.add("active");
    i++;
  }, speed);
}

/* ===== æ“ä½œ ===== */
function setSection(n){
  sec = n;
  idx = 0;
  stop();
  render();
}

function next(){
  idx = (idx + 1) % sections[sec].d.length;
  stop();
  render();
  if(auto) startKara();
}

function prev(){
  idx = (idx - 1 + sections[sec].d.length) % sections[sec].d.length;
  stop();
  render();
}

function rand(){
  idx = Math.floor(Math.random() * sections[sec].d.length);
  stop();
  render();
}

function reset(){
  idx = 0;
  stop();
  render();
}

/* ===== åˆ¶å¾¡ ===== */
function stop(){
  stopKara();
}

function togglePlay(){
  stop();
  startKara();
}

function syncAutoBtn(){
  autoBtn.textContent = auto ? "è‡ªå‹•ON" : "è‡ªå‹•OFF";
}

function toggleAuto(){
  auto = !auto;
  syncAutoBtn();
}

function toggleKara(){
  kara = !kara;
  karaBtn.textContent = kara ? "ğŸŒˆON" : "ğŸŒˆOFF";
  stop();
  render();
}

function setSpeed(v){
  speed = Number(v);
  speedLabel.textContent = speed + "ms";
}

function setLevel(l){
  level = l;

  bBtn.classList.remove("modeOn");
  aBtn.classList.remove("modeOn");

  if(l === "b"){
    bBtn.classList.add("modeOn");
    speed = Math.max(speed, 450);
    speedRange.value = speed;
  }else{
    aBtn.classList.add("modeOn");
    speed = Math.min(speed, 350);
    speedRange.value = speed;
  }
  speedLabel.textContent = speed + "ms";
}

/* ===== ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ ===== */
let daily = null;

function r(a){
  return a[Math.floor(Math.random()*a.length)];
}

function pickDaily(){
  // è¿·ã„ã«ãã„ç‹é“ãƒ«ãƒ¼ãƒˆ
  // æ¯éŸ³ â†’ æ‹—éŸ³ â†’ æ¿éŸ³ï¼ˆï¼‹ãŸã¾ã«ãƒªã‚ºãƒ ï¼‰
  const plan = [
    {sec:0, p:r(p1)},
    {sec:3, p:r(p4)},
    {sec:2, p:r(p3)}
  ];
  if(Math.random() < 0.5){
    plan.splice(1, 0, {sec:4, p:r(p5)}); // ãŸã¾ã«ãƒªã‚ºãƒ ã‚’æŒŸã‚€
  }
  return plan;
}

function showDaily(){
  if(!daily) daily = pickDaily();
  dailyText.textContent =
    daily.map((x,i)=>`(${i+1}) ${sections[x.sec].t}ï¼š${x.p}`).join("\n");
}

function shuffleDaily(){
  daily = pickDaily();
  showDaily();
}

function startDaily(){
  if(!daily) daily = pickDaily();

  // âœ… ã“ã“ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆï¼štoggleAuto() ã‚’å‘¼ã¶ã¨åè»¢ã™ã‚‹ã®ã§ã€ŒONã«å›ºå®šã€
  auto = true;
  syncAutoBtn();

  runDaily(0);
}

function runDaily(i){
  if(!daily[i]) return;

  sec = daily[i].sec;
  idx = sections[sec].d.indexOf(daily[i].p);
  if(idx < 0) idx = 0;

  render();
  startKara();

  const len = splitText(daily[i].p).length;
  setTimeout(()=>{
    runDaily(i+1);
  }, len * speed + 800);
}

/* ===== åˆæœŸ ===== */
render();
showDaily();
syncAutoBtn();
karaBtn.textContent = kara ? "ğŸŒˆON" : "ğŸŒˆOFF";
</script>

</body>
</html>